# 📖 Cache 적용 보고서

## 1️⃣ 예약 가능한 콘서트 목록 조회

### 기능 및 요구사항

- 메인 화면이나 콘서트 조회 화면에서 기본적으로 제공하는 예약 가능 목록 조회 기능
- 사용자의 접근 빈도가 높고 데이터 변경 빈도는 낮음
- 캐시를 활용하여 1초 이하의 지연 시간을 유지

### Cache 전략

- 데이터 변경이 잘 일어나지 않아 캐싱 전략을 **Cache-Aside** 로 선택
  - 클라이언트 요청 시 캐시를 먼저 조회
  - 캐시에 데이터가 없으면 DB 조회 후 캐시에 저장
- 캐시 무효화 전략
  - 콘서트 정보가 신규 추가 되거나 수정 되었을 경우
  - 티켓 오픈 시간이 되어 예약 가능한 상태가 되는 경우
  - 티켓 마감 시간이 되어 예약 불가능한 상태가 되는 경우 
- TTL 설정
  - 캐시가 무한히 유지되지 않도록 TTL 설정 (기본 10분)

---

## 2️⃣ 예매 가능 여부를 포함한 좌석 조회

### 기능 및 요구사항

- 특정 콘서트 일정의 예매 가능 여부를 포함한 좌석 조회
- 사용자의 접근 빈도가 높고 데이터 변경 빈도는 적당
- 캐시를 활용하여 1초 이하의 지연 시간을 유지
- 분산 락과 연계하여 예약 시 상태를 빠르게 체크 할 수 있음

### Cache 전략

- 데이터 변경이 적당히 일어나지만 조회를 많이 하여 캐싱 전략을 **Write-Through**로 선택
  - 클라이언트 요청 시 캐시를 먼저 조회
  - 캐시에 데이터가 없으면 DB 조회 후 캐시에 저장
  - 예약 상태가 변경될 시 캐시와 DB를 모두 업데이트하여 일관성 유지
- 캐시 무효화 전략
  - 조회가 잘되지 않는 예약 가능 기간이 지난 건들은 캐시에서 삭제 (스케줄러)
- TTL 설정
  - 데이터 일관성을 유지하기 위해 TTL을 설정하지 않음
